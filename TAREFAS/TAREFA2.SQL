CREATE DATABASE GESTAOEMPRESA;

USE GESTAOEMPRESA;

CREATE TABLE DEPARTAMENTO(
	ID_DEPART SMALLINT AUTO_INCREMENT,
    NOMEDEPART VARCHAR (200) NOT NULL,
    NOMESETOR VARCHAR (200) NOT NULL,
    PRIMARY KEY (ID_DEPART)
);

CREATE TABLE FUNCIONARIOS(
	MATRICULA INT AUTO_INCREMENT,
	CPF BIGINT (11) NOT NULL,
    NOME VARCHAR (200) NOT NULL,
    DEPART_ID SMALLINT,
    ENDERECO VARCHAR (200),
    TELEFONE VARCHAR (200),
    PRIMARY KEY (MATRICULA),
	CONSTRAINT FK_FUNC_DEPART FOREIGN KEY (DEPART_ID) REFERENCES DEPARTAMENTO(ID_DEPART)
);

CREATE TABLE DEPENDENTES(
	ID_DEPEND SMALLINT AUTO_INCREMENT,
    ID_FUNC INT,
    NOMEDEPEND VARCHAR (200) NOT NULL,
    FILIACAO VARCHAR (200) NOT NULL,
    PRIMARY KEY (ID_DEPEND),
    CONSTRAINT FK_DEPEND_FUNC FOREIGN KEY (ID_FUNC) REFERENCES FUNCIONARIOS(MATRICULA)
);

INSERT INTO DEPARTAMENTO (NOMEDEPART, NOMESETOR)
VALUES ('FINANCEIRO', 'INTERNO');

SELECT * FROM DEPARTAMENTO;

INSERT INTO FUNCIONARIOS (CPF, NOME, DEPART_ID)
VALUES (08819053489, 'LAYLA COMPARIN', '1'), (07887117682, 'VANESSA SANTOS', '2');

SELECT * FROM FUNCIONARIOS;

INSERT INTO DEPENDENTES (ID_FUNC, NOMEDEPEND, FILIACAO)
VALUES ('2', 'LANA', 'FILHA'), ('1', 'MAYA', 'FILHA');

SELECT * FROM DEPENDENTES;

SELECT F.CPF, F.NOME, D.NOMEDEPART, D.NOMESETOR, DEP.NOMEDEPEND, DEP.FILIACAO FROM FUNCIONARIOS F
INNER JOIN DEPARTAMENTO D ON F.DEPART_ID = D.ID_DEPART
INNER JOIN DEPENDENTES DEP ON DEP.ID_FUNC = F.MATRICULA;

